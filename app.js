(()=>{"use strict";function e(e,c){const t=document.createElement(e);return c.forEach((e=>t.classList.add(e))),t}const c=e("div",["container"]),t=e("header",["header"]),a=e("h1",["header__title"]),o=e("p",["header__description"]),r=e("a",["link","header__link"]);a.textContent="virtual keyboard",o.textContent="project for ",o.append(r),r.textContent="Rolling Scopes School",r.setAttribute("href","https://rs.school/"),r.setAttribute("target","blank"),t.append(a),t.append(o);const d=t,n=e("main",["main"]),h=e("div",["main__textarea-wrapper"]),s=e("p",["textarea__lang-info"]),i=e("textarea",["main__textarea","textarea"]);s.textContent='(Windows) english ⇄ русский: "ALT + CTRL" | "⇄"',h.append(s),h.append(i);const l=h,p={en:[{char:"`",alt:"~",code:"Backquote"},{char:"1",alt:"!",code:"Digit1"},{char:"2",alt:"@",code:"Digit2"},{char:"3",alt:"#",code:"Digit3"},{char:"4",alt:"$",code:"Digit4"},{char:"5",alt:"%",code:"Digit5"},{char:"6",alt:"^",code:"Digit6"},{char:"7",alt:"&",code:"Digit7"},{char:"8",alt:"*",code:"Digit8"},{char:"9",alt:"(",code:"Digit9"},{char:"0",alt:")",code:"Digit0"},{char:"-",alt:"_",code:"Minus"},{char:"=",alt:"+",code:"Equal"},{char:"backspace",alt:"~",width:"keyboard__btn_span-5",code:"Backspace"},{char:"tab",width:"keyboard__btn_span-3",code:"Tab"},{char:"q",code:"KeyQ"},{char:"w",code:"KeyW"},{char:"e",code:"KeyE"},{char:"r",code:"KeyR"},{char:"t",code:"KeyT"},{char:"y",code:"KeyY"},{char:"u",code:"KeyU"},{char:"i",code:"KeyI"},{char:"o",code:"KeyO"},{char:"p",code:"KeyP"},{char:"[",alt:"{",code:"BracketLeft"},{char:"]",alt:"}",code:"BracketRight"},{char:"\\",alt:"|",code:"Backslash"},{char:"del",code:"Delete"},{char:"caps lock",width:"keyboard__btn_span-4",code:"CapsLock"},{char:"a",code:"KeyA"},{char:"s",code:"KeyS"},{char:"d",code:"KeyD"},{char:"f",code:"KeyF"},{char:"g",code:"KeyG"},{char:"h",code:"KeyH"},{char:"j",code:"KeyJ"},{char:"k",code:"KeyK"},{char:"l",code:"KeyL"},{char:";",alt:":",code:"Semicolon"},{char:"'",alt:'"',code:"Quote"},{char:"enter",width:"keyboard__btn_span-5",code:"Enter"},{char:"shift",width:"keyboard__btn_span-5",code:"ShiftLeft"},{char:"z",code:"KeyZ"},{char:"x",code:"KeyX"},{char:"c",code:"KeyC"},{char:"v",code:"KeyV"},{char:"b",code:"KeyB"},{char:"n",code:"KeyN"},{char:"m",code:"KeyM"},{char:",",alt:"<",code:"Comma"},{char:">",code:"Period"},{char:"/",alt:"?",code:"Slash"},{char:"▲",code:"ArrowUp"},{char:"shift",width:"keyboard__btn_span-4",code:"ShiftRight"},{char:"ctrl",width:"keyboard__btn_span-3",code:"ControlLeft"},{char:"win",width:"keyboard__btn_span-3",code:"MetaLeft"},{char:"alt",code:"AltLeft"},{char:"_____",width:"keyboard__btn_span-10",code:"Space"},{char:"alt",code:"AltRight"},{char:"ctrl",width:"keyboard__btn_span-3",code:"ControlRight"},{char:"◀",code:"ArrowLeft"},{char:"▼",code:"ArrowDown"},{char:"▶",code:"ArrowRight"},{char:"⇄",code:"Lang"}],ru:[{char:"ё",alt:"~",code:"Backquote"},{char:"1",alt:"!",code:"Digit1"},{char:"2",alt:'"',code:"Digit2"},{char:"3",alt:"№",code:"Digit3"},{char:"4",alt:";",code:"Digit4"},{char:"5",alt:"%",code:"Digit5"},{char:"6",alt:":",code:"Digit6"},{char:"7",alt:"?",code:"Digit7"},{char:"8",alt:"*",code:"Digit8"},{char:"9",alt:"(",code:"Digit9"},{char:"0",alt:")",code:"Digit0"},{char:"-",alt:"_",code:"Minus"},{char:"=",alt:"+",code:"Equal"},{char:"backspace",alt:"~",width:"keyboard__btn_span-5",code:"Backspace"},{char:"tab",width:"keyboard__btn_span-3",code:"Tab"},{char:"й",code:"KeyQ"},{char:"ц",code:"KeyW"},{char:"у",code:"KeyE"},{char:"к",code:"KeyR"},{char:"е",code:"KeyT"},{char:"н",code:"KeyY"},{char:"г",code:"KeyU"},{char:"ш",code:"KeyI"},{char:"щ",code:"KeyO"},{char:"з",code:"KeyP"},{char:"х",code:"BracketLeft"},{char:"ъ",code:"BracketRight"},{char:"\\",alt:"/",code:"Backslash"},{char:"del",code:"Delete"},{char:"caps lock",width:"keyboard__btn_span-4",code:"CapsLock"},{char:"ф",code:"KeyA"},{char:"ы",code:"KeyS"},{char:"в",code:"KeyD"},{char:"а",code:"KeyF"},{char:"п",code:"KeyG"},{char:"р",code:"KeyH"},{char:"о",code:"KeyJ"},{char:"л",code:"KeyK"},{char:"д",code:"KeyL"},{char:"ж",code:"Semicolon"},{char:"э",code:"Quote"},{char:"enter",width:"keyboard__btn_span-5",code:"Enter"},{char:"shift",width:"keyboard__btn_span-5",code:"ShiftLeft"},{char:"я",code:"KeyZ"},{char:"ч",code:"KeyX"},{char:"с",code:"KeyC"},{char:"м",code:"KeyV"},{char:"и",code:"KeyB"},{char:"т",code:"KeyN"},{char:"ь",code:"KeyM"},{char:"б",code:"Comma"},{char:"ю",code:"Period"},{char:".",alt:",",code:"Slash"},{char:"▲",code:"ArrowUp"},{char:"shift",width:"keyboard__btn_span-4",code:"ShiftRight"},{char:"ctrl",width:"keyboard__btn_span-3",code:"ControlLeft"},{char:"win",width:"keyboard__btn_span-3",code:"MetaLeft"},{char:"alt",code:"AltLeft"},{char:"_____",width:"keyboard__btn_span-10",code:"Space"},{char:"alt",code:"AltRight"},{char:"ctrl",width:"keyboard__btn_span-3",code:"ControlRight"},{char:"◀",code:"ArrowLeft"},{char:"▼",code:"ArrowDown"},{char:"▶",code:"ArrowRight"},{char:"⇄",code:"Lang"}]},_=e("div",["main__keyboard","keyboard"]),u={},b={shift:!1,caps:!1,ctrl:!1,alt:!1,cursor:0,lang:"ru",keyboard:!1};function y(c){b.keyboard&&[...document.querySelectorAll(".keyboard__btn")].forEach((e=>e.remove())),p[c].forEach((c=>function(c){const t=e("div",["btn","keyboard__btn"]);if(t.textContent=c.char,c.width&&t.classList.add(c.width),c.alt){const a=e("p",["alt-value"]);a.textContent=c.alt,t.append(a)}(c.code.includes("Lang")||c.code.includes("Backspace")||c.code.includes("Enter")||c.code.includes("Shift")||c.code.includes("Alt")||c.code.includes("Control")||c.code.includes("Meta")||c.code.includes("Arrow")||c.code.includes("Arrow")||c.code.includes("Lock")||c.code.includes("Lock")||c.code.includes("Tab")||c.code.includes("Delete"))&&t.classList.add("functional"),u[c.code]={code:c.code,char:c.char,alt:c.alt,btn:t},_.append(t),b.keyboard=!0}(c))),b.caps&&u.CapsLock.btn.classList.add("pressed"),Object.keys(u).forEach((e=>{const c=u[e];c.btn.addEventListener("mousedown",(e=>{e.preventDefault(),g(c.code)})),c.btn.addEventListener("mouseleave",(()=>{k(c.code)})),c.btn.addEventListener("mouseup",(()=>{k(c.code)}))})),localStorage.setItem("lang",c),b.lang=c}function g(e){const c=document.querySelector(".main__textarea"),t=c.selectionStart,a=u[e];let o=c.textContent.substring(0,t),r=c.textContent.substring(t,c.textContent.length);switch(e){case"Backspace":case"Delete":c.selectionStart!==c.selectionEnd?(o=c.textContent.substring(0,c.selectionStart),r=c.textContent.substring(c.selectionEnd,c.textContent.length)):b.cursor>0&&"Backspace"===e?(o=o.substring(0,o.length-1),b.cursor-=1):r=r.substring(1,r.length);break;case"Space":o+=" ",b.cursor+=1;break;case"Tab":o+="   ",b.cursor+=3;break;case"Enter":o+="\n",b.cursor=o.length;break;case"Lang":"en"===b.lang?y("ru"):y("en");break;case"ArrowLeft":b.cursor>0&&(b.cursor-=1);break;case"ArrowRight":b.cursor<c.textContent.length&&(b.cursor+=1);break;case"ArrowDown":case"ArrowUp":setTimeout((()=>{b.cursor=c.selectionStart}),0);break;case"MetaLeft":case"MetaRight":case"AltRight":case"AltLeft":case"ControlRight":case"ControlLeft":case"ShiftLeft":case"ShiftRight":case"CapsLock":!function(e){e.includes("Shift")?b.shift=!0:e.includes("Alt")?b.alt=!0:e.includes("Control")?b.ctrl=!0:e.includes("Caps")&&(b.caps?b.caps=!1:b.caps=!0),b.alt&&b.ctrl&&("en"===b.lang?y("ru"):y("en"))}(e);break;default:b.caps&&b.shift?o+=a.char:b.caps||b.shift?a.alt?o+=a.alt:o+=a.char.toUpperCase():o+=a.char,b.cursor+=1}"CapsLock"!==e?a.btn.classList.add("pressed"):a.btn.classList.toggle("pressed"),c.textContent=o+r,c.focus(),c.selectionStart=b.cursor}function k(e){e.includes("Caps")||(u[e].btn.classList.contains("functional")&&function(e){e.includes("Shift")?b.shift=!1:e.includes("Alt")?b.alt=!1:e.includes("Control")&&(b.ctrl=!1)}(e),u[e].btn.classList.remove("pressed"))}setTimeout((()=>{document.querySelector(".main__textarea").addEventListener("click",(e=>{b.cursor=e.target.selectionStart}))}),0),document.addEventListener("keydown",(e=>{"F5"!==e.code&&"F12"!==e.code&&"ArrowUp"!==e.code&&"ArrowDown"!==e.code&&"ArrowLeft"!==e.code&&"ArrowRight"!==e.code&&e.preventDefault(),u[e.code]&&g(e.code)})),document.addEventListener("keyup",(e=>{e.preventDefault(),u[e.code]&&k(e.code)})),localStorage.getItem("lang")?y(localStorage.getItem("lang")):y("ru");const f=_;c.append(d),c.append(n),n.append(l),n.append(f),document.querySelector("body").append(c)})();